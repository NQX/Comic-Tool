<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Hello World!</title>
    <link rel="stylesheet" href="index.css">
  </head>
  <body>
    <h1>ðŸ’– Hello World!</h1>
    <p>Test</p>

    <button onclick="addFile()">Add File</button>
    <button onclick="convert()">Convert</button>

    <div>
      <ul id="list">
        
      </ul>

      <table>
        <tr>
          <th>Filename</th>
          <th>Size</th>
          <th>Size new</th>
        </tr>
        <tr>
          <td>a</td>
          <td>a</td>
          <td>a</td>
        </tr>
        <tr>
          <td>a</td>
          <td>a</td>
          <td>a</td>
        </tr>
      </table>
    </div>

    <script>
       //require('./main.js')



       var list = document.getElementById("list");

       const { ipcRenderer } = require('electron');

       let data = {
         message: "hi"
       };

       function addFile() {
        ipcRenderer.send('open-dialog', data);
       }

       ipcRenderer.on('event', function(event, data) {
         let item = data.filePaths[0]

         item = stripPath(item)
         
         var li = document.createElement("li");
        list.appendChild(document.createTextNode(item));
       })


       function convert() {
        ipcRenderer.send('start-convert', {});
       }


       function stripPath(path) {
        let parts = path.split('/')
        return parts[parts.length-1]
       }

       //drag drop
       list.ondragstart = (event) => {
         event.preventDefault()
         ipcRenderer.send('ondragstart', 'msg')
       }

    </script>
  </body>
</html>
